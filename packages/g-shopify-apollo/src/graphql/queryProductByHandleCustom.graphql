query productByHandleCustom($handle: String!) {
    productByHandle(handle: $handle) {
        ...ProductFragment
    }
}
extend type ProductVariant {
    isInCart: Boolean!
}
query variantByProduct($handle: String!,$index: Int!) {
    productByHandle(handle: $handle) {
        id
        handle
        variants(first: $index ) {
            edges {
                node {
                    id
                    title
                    quantityAvailable
                    selectedOptions {
                        parent_handle:name
                        handle:value
                        title:value
                    }
                }
            }
        }
    }
}

query variantBySelectedOptions($handle: String!, $selectedOptions: [SelectedOptionInput!]!) {
    productByHandle(handle: $handle) {
        variantBySelectedOptions(selectedOptions:$selectedOptions){
            ...ProductVariantFragment
        }
    }
}
